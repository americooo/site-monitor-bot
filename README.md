# Телеграм-бот: Мониторинг веб-сайтов

Бот для отслеживания работы веб-сайтов. Возможности: добавление сайтов, мониторинг, уведомления и отчёты.

## Архитектура

* **Модули**: bot.py (основной), database.py (база данных), models.py (модели), monitoring.py (проверка), reports.py (отчёты), handlers/sites.py (команды).
* **Паттерны**: Strategy (для уведомлений), Factory (для подключения к базе данных).
* **База данных**: SQLite (db.sqlite3), SQLAlchemy ORM.
* **Обработка ошибок**: Try-except и logging (лог-файл bot.log).
* **Схема**:

  | Таблица | Колонки                                                                          |
  | ------- | -------------------------------------------------------------------------------- |
  | sites   | id (PK), url, interval, notifications\_enabled                                   |
  | checks  | id (PK), site\_id (FK), status\_code, response\_time, checked\_at, content\_hash |

## Установка

1. Установите библиотеки: `pip install -r requirements.txt`
2. Создайте `.env`: `BOT_TOKEN=your_token` и `ADMIN_ID=your_id`
3. База данных: `python bot.py` (создаётся автоматически)
4. Запуск бота: `python bot.py`

## Примеры команд

* `/start` – Запуск бота
* `/addsite https://google.com` – Добавить сайт
* `/listsites` – Список сайтов
* `/delsite 1` – Удалить сайт
* `/setinterval 1 10` – Установить интервал (в минутах)
* `/toggle_notifications 1` – Включить/отключить уведомления
* `/history 1` – История (последние 10 проверок)
* `/uptime 1` – Статистика uptime и график
* `/export 1` – Экспорт в CSV

## Тестирование

* `pytest tests/` – 5 unit-тестов (добавление сайта, uptime, ошибки)

## Видео-демо

\[Ссылка на видео] (по желанию, 2-3 минуты: команды, уведомления, отчёты)

## Дополнительно

* Мониторинг: каждые 60 секунд (по интервалу сайта)
* Уведомления: при изменении статуса или контента
* Еженедельный отчёт: uptime и среднее время ответа
* Графики: текстовые (ASCII art)
* Экспорт: отправка CSV-файла
